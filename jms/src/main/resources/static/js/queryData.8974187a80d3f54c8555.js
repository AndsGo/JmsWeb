webpackJsonp([30],{1976:function(t,e,a){"use strict";var r=l(a(7)),n=l(a(1977));function l(t){return t&&t.__esModule?t:{default:t}}(0,r.default)(n.default)},1977:function(t,e,a){var r=a(0)(a(1979),a(1980),function(t){a(1978)},null,null);t.exports=r.exports},1978:function(t,e){},1979:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,n=a(34);(r=n)&&r.__esModule;e.default={data:function(){return{rules:{sql:[{required:!0,message:"该选项为必填项",trigger:"blur"}]},form:{sql:"",start:0,limit:100},tableData:[],columns:[],treeData:[],total:0,currentPage:1,loading:!1,loadingText:"正在查询,请稍后..."}},methods:{changeSql:function(){this.form.start=0},currentChange:function(t){this.currentPage=t,this.form.start=100*(t-1),this.queryData()},valid:function(t){if(!t)return"数量不能为空！";for(var e=t.split("-"),a=0;a<e.length;a++){var r=parseInt(e[a]);if(!/^\d+(\.{0,1}\d+){0,1}$/.test(r))return"请输入正整数值！"}},exportData:function(){var t=this;this.$refs.form.validate(function(e){e&&t.$prompt("请输入你要导出的数量,如果是区间值请用‘-’号隔开,如:100-500。一次最多可导出1万条数据","提示",{confirmButtonText:"确定",cancelButtonText:"取消",closeOnClickModal:!1,inputValidator:t.valid}).then(function(e){var a=e.value.split("-"),r=a.length>1?parseInt(a[0]):0,n=a.length>1?parseInt(a[1]):parseInt(a[0]);if(n<r){var l=r;r=n,n=l}if(n-r>1e4||n-r<1)t.$message.error("一次最多可导出10000条数据,且不能小于1条！");else{t.form.start=r,t.form.limit=n-r;var o="sql="+t.form.sql+"&start="+t.form.start+"&limit="+t.form.limit;window.location.href=t.$axios.defaults.baseURL+"queryData/export?"+o}}).catch(function(){})})},resetData:function(){this.form.sql=""},clickNode:function(t){this.form.sql=t.label},recordHistory:function(){this.treeData.splice(0,0,{label:this.form.sql})},queryData:function(t){var e=this;this.$refs.form.validate(function(a){a&&(e.loadingText="正在查询,请稍后...",e.loading=!0,e.$httpExt().get("queryData/list",e.form).then(function(a){if("ok"==a.succ){var r=a.result;e.tableData=r.dataList.datas,e.columns=r.dataList.columns,e.total=r.total,e.loading=!1,t&&t()}},function(t){e.loading=!1,e.$message.error(t.msg)}))})}},mounted:function(){}}},1980:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{height:"100%"},attrs:{"element-loading-text":t.loadingText,"element-loading-spinner":"el-icon-loading"}},[a("el-aside",{staticStyle:{padding:"0"},attrs:{width:"200px"}},[a("el-tree",{attrs:{data:t.treeData},on:{"node-click":t.clickNode}})],1),t._v(" "),a("el-container",[a("el-header",{staticStyle:{border:"0"},attrs:{height:"180px"}},[a("el-row",{staticStyle:{padding:"10px 0"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.queryData(t.recordHistory)}}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.exportData}},[t._v("导出")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.resetData}},[t._v("重置")])],1),t._v(" "),a("el-row",[a("el-form",{ref:"form",attrs:{rules:t.rules,"label-position":"left",model:t.form}},[a("el-form-item",{attrs:{label:"",prop:"sql"}},[a("el-input",{attrs:{type:"textarea",rows:5,resize:"none"},on:{change:t.changeSql},model:{value:t.form.sql,callback:function(e){t.$set(t.form,"sql",e)},expression:"form.sql"}})],1)],1)],1)],1),t._v(" "),a("el-main",[a("el-table",{attrs:{data:t.tableData,height:"550px",border:""}},t._l(t.columns,function(t){return a("el-table-column",{attrs:{property:t,label:t,width:"150","show-overflow-tooltip":""}})})),t._v(" "),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":100,layout:"total, prev, pager, next, jumper",total:t.total},on:{"current-change":t.currentChange,"update:currentPage":function(e){t.currentPage=e}}})],1)],1)],1)},staticRenderFns:[]}}},[1976]);